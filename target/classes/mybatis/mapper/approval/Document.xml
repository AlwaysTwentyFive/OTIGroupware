<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oti.groupware.approval.dao.DocumentDAO">

	<resultMap id="documentResultMap" type="document">
	    <result property="docId" column="doc_id"/>
	    <result property="empId" column="emp_id"/>
	    <result property="docType" column="doc_type"/>
	    <result property="docTitle" column="doc_title"/>
	    <result property="docContent" column="doc_content" jdbcType="CLOB" javaType="string"/>
	    <result property="docRetentionPeriod" column="doc_retention_period"/>
	    <result property="docWriteDate" column="doc_write_date"/>
	    <result property="docReportDate" column="doc_report_date"/>
	    <result property="docCompleteDate" column="doc_complete_date"/>
	    <result property="docImportance" column="doc_importance"/>
	    <result property="docState" column="doc_state"/>
	    <result property="docReadYn" column="doc_read_yn"/>
	    <result property="docTempYn" column="doc_temp_yn"/>
	    <result property="docAprvStep" column="doc_aprv_step"/>
	</resultMap>

    <select id="getDocumentById" parameterType="string" resultMap="documentResultMap">
        SELECT
            doc_id, emp_id, doc_type, doc_title, doc_content,
            doc_retention_period, doc_write_date, doc_report_date,
            doc_complete_date, doc_importance, doc_state, doc_read_yn,
            doc_temp_yn, doc_aprv_step
        FROM documents
        WHERE doc_id = #{docId}
    </select>

    <insert id="insertDocument" parameterType="document">
        INSERT INTO documents (
            doc_id, emp_id, doc_type, doc_title, doc_content,
            doc_retention_period, doc_write_date, doc_report_date,
            doc_complete_date, doc_importance, doc_state, doc_read_yn,
            doc_temp_yn, doc_aprv_step
        )
        VALUES (
            #{docId}, #{empId}, #{docType}, #{docTitle}, #{docContent},
            #{docRetentionPeriod}, #{docWriteDate}, #{docReportDate},
            #{docCompleteDate}, #{docImportance}, #{docState}, #{docReadYn},
            #{docTempYn}, #{docAprvStep}
        )
    </insert>

    <update id="updateDocument" parameterType="document">
        UPDATE documents SET
            emp_id = #{empId}, doc_type = #{docType},
            doc_title = #{docTitle}, doc_content = #{docContent},
            doc_retention_period = #{docRetentionPeriod},
            doc_write_date = #{docWriteDate},
            doc_report_date = #{docReportDate},
            doc_complete_date = #{docCompleteDate},
            doc_importance = #{docImportance},
            doc_state = #{docState},
            doc_read_yn = #{docReadYn} ,
            doc_temp_yn = #{docTempYn},
            doc_aprv_step = #{docAprvStep}
		WHERE doc_id = #{docId}
	</update>
	
	<delete id="deleteDocument" parameterType="string">
		DELETE FROM documents WHERE doc_id = #{docId}
	</delete>
	    
    <insert id="insertDraft" parameterType="document">
        INSERT INTO documents (
            doc_id, emp_id, doc_type, doc_title, doc_content,
            doc_retention_period, doc_write_date, doc_state,
            doc_temp_yn
        )
        VALUES (
            #{docId}, #{empId}, #{docType}, #{docTitle}, #{docContent},
            #{docRetentionPeriod}, #{docWriteDate}, #{docState},
            #{docTempYn}
        )
    </insert>
</mapper>